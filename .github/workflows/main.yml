# CI for Arduino Compilation
name: Arduino Build

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

# The actual number of jobs started depends on 
# how many configurations the matrix will produce.
jobs:
  build:
    strategy:
      matrix:
        # The matrix will produce one job for each configuration
        # parameter of type `arduino-platform`, in this case, it
        # is only 1.
        arduino-platform: ["arduino:avr"]
        # We need to statically define the FQBN of the boards
        # we want to test for each platform.
        include:
          - arduino-platform: "arduino:avr"
            fqbn: "arduino:avr:nano"

    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@main

      - name: Setup Arduino CLI
        uses: arduino/setup-arduino-cli@v1.1.2
      
      - name: Install platform
        run: |
          arduino-cli core update-index
          arduino-cli core install $
      - name: Compile Sketch
        run: arduino-cli compile --fqbn $ ./MotorControl --warnings more
